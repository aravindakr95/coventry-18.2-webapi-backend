{"version":3,"sources":["../../src/users/users-endpoint.js"],"names":["makeUsersEndpointHandler","userList","handle","httpRequest","method","postUser","body","getUser","statusCode","errorMessage","id","pathParams","max","before","after","queryParams","headers","data","JSON","stringify","username","password","role","result","add","errmsg"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEe,SAASA,wBAAT,CAAkC;AAC/CC,EAAAA;AAD+C,CAAlC,EAEZ;AACD,SAAO,eAAeC,MAAf,CAAsBC,WAAtB,EAAmC;AACxC,YAAQA,WAAW,CAACC,MAApB;AACE,WAAK,MAAL;AACE,eAAOC,QAAQ,CAACF,WAAW,CAACG,IAAb,CAAf;;AAEF,WAAK,KAAL;AACE,eAAOC,OAAO,CAACJ,WAAD,CAAd;;AAEF;AACE,eAAO,wBAAc;AACnBK,UAAAA,UAAU,EAAE,GADO;AAEnBC,UAAAA,YAAY,EAAG,GAAEN,WAAW,CAACC,MAAO;AAFjB,SAAd,CAAP;AARJ;AAaD,GAdD;;AAgBA,iBAAeG,OAAf,CAAuBJ,WAAvB,EAAoC;AAClC,UAAM;AACJO,MAAAA;AADI,QAEFP,WAAW,CAACQ,UAAZ,IAA0B,EAF9B;AAGA,UAAM;AACJC,MAAAA,GADI;AAEJC,MAAAA,MAFI;AAGJC,MAAAA;AAHI,QAIFX,WAAW,CAACY,WAAZ,IAA2B,EAJ/B;AAOA,WAAO;AACLC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OADJ;AAILR,MAAAA,UAAU,EAAE,GAJP;AAKLS,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,EAAf;AALD,KAAP;AAOD;;AAED,iBAAed,QAAf,CAAwB;AACtBe,IAAAA,QADsB;AAEtBC,IAAAA,QAFsB;AAGtBC,IAAAA;AAHsB,GAAxB,EAIG;AACD,QAAI;AACF,UAAIC,MAAM,GAAG,MAAMtB,QAAQ,CAACuB,GAAT,CAAa;AAC9B,gBAAQ;AACNJ,UAAAA,QADM;AAEN,sBAAY,qBAAU;AACpBC,YAAAA;AADoB,WAAV,CAFN;AAKNC,UAAAA;AALM;AADsB,OAAb,CAAnB;AASA,aAAO;AACLN,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SADJ;AAILR,QAAAA,UAAU,EAAE,GAJP;AAKLS,QAAAA,IAAI,EAAE;AACJM,UAAAA;AADI;AALD,OAAP;AAUD,KApBD,CAoBE,OAAO;AACPE,MAAAA;AADO,KAAP,EAEC;AAED,aAAO,wBAAc;AACnBjB,QAAAA,UAAU,EAAE,GADO;AAEnBC,QAAAA,YAAY,EAAG,GAAEgB,MAAO;AAFL,OAAd,CAAP;AAKD;AACF;AACF","sourcesContent":["import makeHttpError from \"../helpers/validators/http-error\";\nimport hashValue from '../helpers/hasher'\n\nexport default function makeUsersEndpointHandler({\n  userList\n}) {\n  return async function handle(httpRequest) {\n    switch (httpRequest.method) {\n      case \"POST\":\n        return postUser(httpRequest.body);\n\n      case \"GET\":\n        return getUser(httpRequest);\n\n      default:\n        return makeHttpError({\n          statusCode: 405,\n          errorMessage: `${httpRequest.method} method not allowed.`\n        });\n    }\n  };\n\n  async function getUser(httpRequest) {\n    const {\n      id\n    } = httpRequest.pathParams || {}\n    const {\n      max,\n      before,\n      after\n    } = httpRequest.queryParams || {}\n\n\n    return {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      statusCode: 200,\n      data: JSON.stringify({})\n    };\n  }\n\n  async function postUser({\n    username,\n    password,\n    role\n  }) {\n    try {\n      var result = await userList.add({\n        \"user\": {\n          username,\n          \"password\": hashValue({\n            password,\n          }),\n          role\n        }\n      })\n      return {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        statusCode: 200,\n        data: {\n          result\n        }\n\n      };\n    } catch ({\n      errmsg\n    }) {\n\n      return makeHttpError({\n        statusCode: 421,\n        errorMessage: `${errmsg}.`\n      });\n\n    }\n  }\n}"],"file":"users-endpoint.js"}